<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides a causal_tbl class for causal inference. A causal_tbl 
    keeps track of information on the roles of variables like treatment and
    outcome, and provides functionality to store models and their fitted
    values as columns in a data frame.">
<title>Tidy Causal Data Frames and Tools • causaltbl</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tidy Causal Data Frames and Tools">
<meta property="og:description" content="Provides a causal_tbl class for causal inference. A causal_tbl 
    keeps track of information on the roles of variables like treatment and
    outcome, and provides functionality to store models and their fitted
    values as columns in a data frame.">
<meta property="og:image" content="http://corymccartan.com/causaltbl/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">causaltbl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CoryMcCartan/causaltbl/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="causaltbl-">causaltbl <a class="anchor" aria-label="anchor" href="#causaltbl-"></a>
</h1>
</div>
<!-- badges: start -->

<p>This package provides a <code>causal_tbl</code> class for causal inference. A <code>causal_tbl</code> is a subclass of <code>tibble</code> which keeps track of information on the roles of variables like treatment and outcome, and provides functionality to store models and their fitted values as columns in a data frame.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of causaltbl from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"CoryMcCartan/causaltbl"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-causaltbl">Using <code>causaltbl</code>
<a class="anchor" aria-label="anchor" href="#using-causaltbl"></a>
</h2>
<p>A causal tibble, <code>causal_tbl</code>, is a data frame with attributes identifying which columns correspond to common inputs in causal inference analyses. At the most basic level, you can indicate the outcome and treatment columns. For more involved analyses, <code>causal_tbl</code>s can keep track of additional columns including multiple outcomes and multiple treatments.</p>
<p>The primary entryway to <code>causaltbl</code> is through <!--- [`tidycausal`](https://corymccartan.com/tidycausal/) -->. You can create a <code>causal_tbl</code> directly via <code><a href="reference/causal_tbl.html">causal_tbl()</a></code>.</p>
<p>Suppose we have data from a really simple differences in differences design. Our data looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"b"</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2015</span><span class="op">:</span><span class="fl">2018</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  trt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>There are two units (<code>id</code>), <code>a</code> and <code>b</code>. We have 4 yearly observations from 2015 to 2018 (<code>year</code>) for each unit. <code>a</code> is never treated and <code>b</code> is treated in 2017 and 2018 (<code>trt</code>). Some outcome (<code>y</code>) is measured yearly.</p>
<p>We first can make a <code>causal_tbl</code> by passing <code>df</code> to <code><a href="reference/causal_tbl.html">causal_tbl()</a></code>. We don’t need to specify any options.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CoryMcCartan/causaltbl" class="external-link">causaltbl</a></span><span class="op">)</span></span>
<span><span class="va">did</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/causal_tbl.html">causal_tbl</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p>Now <code>did</code> is a <code>causal_tbl</code> version of <code>df</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">did</span></span>
<span><span class="co">#&gt; # A &lt;causal_tbl&gt; [8 × 4]</span></span>
<span><span class="co">#&gt;                          </span></span>
<span><span class="co">#&gt;   id     year   trt     y</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 a      2015     0     1</span></span>
<span><span class="co">#&gt; 2 a      2016     0     3</span></span>
<span><span class="co">#&gt; 3 a      2017     0     2</span></span>
<span><span class="co">#&gt; 4 a      2018     0     3</span></span>
<span><span class="co">#&gt; 5 b      2015     0     2</span></span>
<span><span class="co">#&gt; 6 b      2016     0     4</span></span>
<span><span class="co">#&gt; 7 b      2017     1     4</span></span>
<span><span class="co">#&gt; 8 b      2018     1     5</span></span></code></pre></div>
<p>To set outcome , we can use the corresponding functions <code><a href="reference/set_outcome.html">set_outcome()</a></code>. <code>causal_tbl</code> uses tidy evaluation, so we can use the bare column name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">did</span> <span class="op">&lt;-</span> <span class="va">did</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/set_outcome.html">set_outcome</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="va">did</span></span>
<span><span class="co">#&gt; # A &lt;causal_tbl&gt; [8 × 4]</span></span>
<span><span class="co">#&gt;                     [out]</span></span>
<span><span class="co">#&gt;   id     year   trt     y</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 a      2015     0     1</span></span>
<span><span class="co">#&gt; 2 a      2016     0     3</span></span>
<span><span class="co">#&gt; 3 a      2017     0     2</span></span>
<span><span class="co">#&gt; 4 a      2018     0     3</span></span>
<span><span class="co">#&gt; 5 b      2015     0     2</span></span>
<span><span class="co">#&gt; 6 b      2016     0     4</span></span>
<span><span class="co">#&gt; 7 b      2017     1     4</span></span>
<span><span class="co">#&gt; 8 b      2018     1     5</span></span></code></pre></div>
<p>Similarly, we can indicate that <code>did</code> has a treatment column <code>trt</code> or panel structure for each <code>id</code>-<code>year</code> with the corresponding <code><a href="reference/set_treatment.html">set_treatment()</a></code> and <code><a href="reference/set_panel.html">set_panel()</a></code> functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">did</span> <span class="op">&lt;-</span> <span class="va">did</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/set_treatment.html">set_treatment</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="va">trt</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/set_panel.html">set_panel</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="va">id</span>, time <span class="op">=</span> <span class="va">year</span><span class="op">)</span></span>
<span><span class="va">did</span></span>
<span><span class="co">#&gt; # A &lt;causal_tbl&gt; [8 × 4]</span></span>
<span><span class="co">#&gt;   [unit] [time] [trt] [out]</span></span>
<span><span class="co">#&gt;   id       year   trt     y</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 a        2015     0     1</span></span>
<span><span class="co">#&gt; 2 a        2016     0     3</span></span>
<span><span class="co">#&gt; 3 a        2017     0     2</span></span>
<span><span class="co">#&gt; 4 a        2018     0     3</span></span>
<span><span class="co">#&gt; 5 b        2015     0     2</span></span>
<span><span class="co">#&gt; 6 b        2016     0     4</span></span>
<span><span class="co">#&gt; 7 b        2017     1     4</span></span>
<span><span class="co">#&gt; 8 b        2018     1     5</span></span></code></pre></div>
<p>This sets attributes that are used down-the-line by other packages. We can retrieve them by calling their <code>get</code>ters. For the outcome, <code><a href="reference/set_outcome.html">get_outcome()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/set_outcome.html">get_outcome</a></span><span class="op">(</span><span class="va">did</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "y"</span></span></code></pre></div>
<p>For the treatment, <code><a href="reference/set_treatment.html">get_treatment()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/set_treatment.html">get_treatment</a></span><span class="op">(</span><span class="va">did</span><span class="op">)</span></span>
<span><span class="co">#&gt;     y </span></span>
<span><span class="co">#&gt; "trt"</span></span></code></pre></div>
<p>And for the panel structure, <code><a href="reference/set_panel.html">get_panel()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/set_panel.html">get_panel</a></span><span class="op">(</span><span class="va">did</span><span class="op">)</span></span>
<span><span class="co">#&gt; $unit</span></span>
<span><span class="co">#&gt; [1] "id"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $time</span></span>
<span><span class="co">#&gt; [1] "year"</span></span></code></pre></div>
<p>For more information on using <code>causal_tbl</code>s or designing functions that use <code>causal_tbl</code>s, see the Advanced <code>causal_tbl</code> vignette.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/CoryMcCartan/causaltbl/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/CoryMcCartan/causaltbl/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing causaltbl</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Cory McCartan <br><small class="roles"> Author, maintainer </small>  </li>
<li>Christopher T. Kenny <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/CoryMcCartan/causaltbl/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/CoryMcCartan/causaltbl/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/github/CoryMcCartan/causaltbl" class="external-link"><img src="https://codecov.io/github/CoryMcCartan/causaltbl/branch/main/graph/badge.svg?token=TXL7DJG9U9" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Cory McCartan, Christopher T. Kenny.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
